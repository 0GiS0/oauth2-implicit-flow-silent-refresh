<% include partials/header %>
<!--Stepper from Codepen: https://codepen.io/thdeux/pen/zBGNrM-->
<div class="md-stepper-horizontal orange">
    <div class="md-step active">
        <a href="/">
            <div class="md-step-circle"><span>1</span></div>
        </a>
        <div class="md-step-title">Get the access token</div>
        <div class="md-step-bar-left"></div>
        <div class="md-step-bar-right"></div>
    </div>
    <div class="md-step">
        <div class="md-step-circle"><span>2</span></div>
        <div class="md-step-title">Call the API</div>
        <div class="md-step-bar-left"></div>
        <div class="md-step-bar-right"></div>
    </div>
</div>
<div class="row">
    <div class="col">
        <div class="card text-center">
            <div class="card-header">
                Get the access token
            </div>
            <div class="card-body">
                <p class="card-text">This client redirects the user to the authorization server to log in and
                    consent the permissions that I'm requesting.</p>
                <a id="login_link" href="#" class="btn btn-primary">Go to the authorization server</a>
            </div>
        </div>
    </div>
</div>
</div>

<% include partials/footer %>

<script>

    $(() => {
        var login_link = document.getElementById('login_link');

        //Create the URL
        let url = `https://login.microsoftonline.com/${config.tenantId}/oauth2/authorize?response_type=${config.response_type}&client_id=${config.client_id}&redirect_uri=${config.redirect_uri}&scope=${config.scope}&resource=${config.resource}&state=${config.state}`;
        console.log(url);
        login_link.setAttribute('href', url);
    });

</script>

</body>

</html>